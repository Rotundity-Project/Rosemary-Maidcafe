# 待办事项 (TODO)

## 🔧 Bug 修复记录

### 已修复

#### 2026-02-17

- [x] **新手引导空值错误** - 生产环境报错 `Cannot read properties of undefined (reading 'currentStep')`
  - 修复文件：`src/systems/guideSystem.ts`、`src/components/ui/GuideOverlay.tsx`
  - 原因：存档加载时 `guide` 对象可能为 `undefined`，代码未做空值检查
  - 状态：✅ 已修复

- [x] **移动端触摸反馈优化** - 合并分支 `perf/mobile-touch-feedback` 到 main
  - 修复文件：多个 UI 组件
  - 状态：✅ 已合并

---

## 优先级：高 (High)

### H1. 存档兼容性修复
- [ ] 添加 `LOAD_GAME` action 数据迁移逻辑
- [ ] 确保旧版本存档缺失字段有默认值
- [ ] 添加存档版本校验

### H2. 数值平衡优化
- [x] 调整初始资金和收入 ✅
- [x] 优化支出计算公式 ✅
- [x] 调整女仆雇佣成本 ✅
- [x] 优化升级费用 ✅

### H3. UI/UX 改进
- [x] 继续完善移动端交互 ✅ 2026-02-17
- [x] 添加更多动画效果 ✅ 2026-02-17
- [x] 优化加载状态 ✅ 2026-02-17
- [x] 女仆列表滑动手势支持 ✅ 2026-02-17
- [ ] 优化游戏速度切换按钮的可访问性
- [ ] 添加触觉反馈（移动端）

---

## 优先级：中 (Medium)

### M1. 游戏内容扩展

#### M1.1 菜单扩展
- [ ] 新增饮品类别（奶茶、果汁）
- [ ] 新增甜点类别（蛋糕、冰淇淋）
- [ ] 季节限定菜单

#### M1.2 事件扩展
- [ ] 节日特殊事件（春节、情人节、圣诞节）
- [ ] 天气特殊事件
- [ ] 随机奇遇事件

#### M1.3 成就扩展
- [ ] 累计成就（雇佣100名女仆）
- [ ] 连续成就（连续7天盈利）
- [ ] 隐藏成就

### M2. 玩法深度

#### M2.1 营销系统
- [ ] 促销活动（打折、买一送一）
- [ ] 会员制度
- [ ] 口碑系统

#### M2.2 装修系统
- [ ] 家具购买
- [ ] 主题装修
- [ ] 装饰品系统

#### M2.3 供应链
- [ ] 原料采购
- [ ] 库存管理
- [ ] 供应商系统

### M3. 社交系统（可选）
- [ ] 玩家排行榜
- [ ] 联盟系统
- [ ] 访客留言

---

## 优先级：低 (Low)

### L1. 美术资源
- [ ] 更多女仆立绘
- [ ] 顾客立绘扩展
- [ ] 场景背景图
- [ ] 特效动画

### L2. 音效扩展
- [ ] 更多背景音乐
- [ ] 环境音效
- [ ] UI 音效

### L3. 技术改进
- [ ] 单元测试覆盖
- [ ] 英文翻译完善
- [ ] 其他语言支持
- [ ] PWA 支持
- [ ] 添加 Error Boundary 组件
- [ ] 添加性能监控

---

## 进行中

### In Progress
- [ ] 存档兼容性修复 (分支: fix/save-compatibility)
- [ ] 移动端 UI 优化 (分支: mobile-ui-optimize)
- [ ] 角色指引优化 (分支: guide-optimize)

---

## 已完成 ✅

- [x] 基础游戏框架搭建
- [x] 女仆系统
- [x] 顾客系统
- [x] 菜单系统
- [x] 设施升级
- [x] 财务系统
- [x] 成就系统
- [x] 存档系统
- [x] 音效系统
- [x] 移动端基础适配
- [x] 新手引导系统
- [x] Bug修复：引导空值错误

---

*最后更新：2026-02-17 04:45*
